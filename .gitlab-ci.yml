image: python:3.8-alpine

stages:
    - deploy

before_script:
    - pip install twine
    - python setup.py sdist

deploy:
    variables:
        TWINE_USERNAME: $PYPI_USERNAME
        TWINE_PASSWORD: $PYPI_PASSWORD
    script:
        - twine upload dist/*
    only:
        - tags